/*!
 * vue-router-user-roles v0.1.96 
 * (c) 2020 Anthony Gore
 * Released under the MIT License.
 */
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("vue")):"function"==typeof define&&define.amd?define(["vue"],r):e.VueRouterUserRoles=r(e.Vue)}(this,function(e){"use strict";function r(e,r){if(!r.router)throw new Error("You must supply a router instance in the options.");var s=new t(r.router);e.prototype.$user=s,r.router.beforeEach(function(e,r,t){return s.resolve(e,r,t)})}e="default"in e?e.default:e;var t=function(r){this.router=r,this.vm=new e({data:{user:null}})};return t.prototype.get=function(){if(!this.vm.user)throw new Error("Attempt to access user before being set");return this.vm.user},t.prototype.set=function(e){if(this.vm.user=e,this.to){var r=this._hasAccessToRoute(this.to),t=r.access,s=r.redirect;t||this.router.push({name:s})}},t.prototype.hasAccess=function(e){var r=e.name,t=this.router.options.routes.find(function(e){return e.name===r});if(!t)throw new Error("Route "+r+" is not defined in the current router");return this._hasAccessToRoute(t).access},t.prototype._hasAccessToRoute=function(e){var r=this,t=void 0;if(this.vm.user&&e.meta.permissions){t={access:!1,redirect:"error_403"};var s=[];for(var o in e.meta.permissions){var i=e.meta.permissions[o];Array.isArray(r.vm.user.role)&&r.vm.user.role.indexOf(i.role)>-1?s.push(i):"string"==typeof r.vm.user.role&&i.role===r.vm.user.role&&s.push(i)}for(var n in s){var u=s[n];if("boolean"==typeof u.access&&u.access)return{access:!0};("boolean"==typeof u.access&&!u.access||"function"==typeof u.access&&!u.access(r.vm.user,e))&&(t={access:!1,redirect:u.redirect})}}else void 0===e.meta.permissions&&(t={access:!0});return t},t.prototype.resolve=function(e,r,t){this.to=e;var s=this._hasAccessToRoute(e),o=s.access,i=s.redirect;o?t():t({name:i})},r.version="0.1.96","undefined"!=typeof window&&window.Vue&&window.Vue.use(r),r});